{% extends "base.html" %}

{% block title %}Reminder History - PlantCareAI{% endblock %}

{% block content %}
<section class="page-header">
  <h1 class="page-title">Reminder History</h1>
  <p class="page-subtitle">View your completed and inactive reminders</p>
  <div class="page-actions">
    <a href="{{ url_for('reminders.index') }}" class="btn btn-secondary">
      â† Back to Active Reminders
    </a>
  </div>
</section>

{% if inactive_reminders %}
<section class="card">
  <div class="section-header">
    <h2 class="section-title">Inactive Reminders</h2>
    <span class="badge badge-muted">{{ inactive_reminders|length }}</span>
  </div>

  <div class="reminder-list">
    {% for reminder in inactive_reminders %}
    <div class="reminder-item">
      <div class="reminder-icon">
        {% if reminder.reminder_type == 'watering' %}ğŸ’§
        {% elif reminder.reminder_type == 'fertilizing' %}ğŸŒ¿
        {% elif reminder.reminder_type == 'misting' %}ğŸ’¦
        {% elif reminder.reminder_type == 'pruning' %}âœ‚ï¸
        {% elif reminder.reminder_type == 'repotting' %}ğŸª´
        {% elif reminder.reminder_type == 'inspection' %}ğŸ”
        {% else %}ğŸ“{% endif %}
      </div>

      <div class="reminder-content">
        <h3 class="reminder-title">
          <a href="{{ url_for('reminders.view', reminder_id=reminder.id) }}">
            {{ reminder.title }}
          </a>
        </h3>
        <p class="reminder-meta small">
          <strong>{{ reminder.frequency|replace('_', ' ')|title }}</strong>
          {% if reminder.frequency == 'one_time' %}
          <span class="badge badge-muted">One-time</span>
          {% endif %}
        </p>
        {% if reminder.last_completed_at %}
        <p class="reminder-meta small muted">
          Completed: {{ reminder.last_completed_at|replace('T', ' at ')|replace('+00:00', ' UTC')|replace('.000000', '') }}
        </p>
        {% endif %}
        {% if reminder.notes %}
        <p class="reminder-notes small muted">{{ reminder.notes }}</p>
        {% endif %}
      </div>

      <div class="reminder-actions">
        <form method="POST" action="{{ url_for('reminders.toggle_status', reminder_id=reminder.id) }}" style="display:inline;">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
          <button type="submit" class="btn btn-small btn-primary" title="Activate this reminder">
            âœ“ Activate
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% else %}
<section class="card empty-state">
  <div class="empty-state-content">
    <h3 class="empty-state-message">No inactive reminders yet</h3>
    <p class="empty-state-hint">
      When you complete one-time reminders or deactivate recurring ones, they'll appear here.
    </p>
    <a href="{{ url_for('reminders.index') }}" class="btn btn-primary">
      View Active Reminders
    </a>
  </div>
</section>
{% endif %}

{% endblock %}
