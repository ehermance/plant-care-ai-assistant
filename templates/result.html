{% extends "base.html" %}
{% block title %}Results — Plant Care AI{% endblock %}
{% block content %}

  <section class="card" aria-live="polite">
    <h2 id="results-heading" tabindex="-1">Results for {{ city|e }}</h2>
    <p>
      Now: {{ weather.current.temp }}°
      {{ weather.current.desc|e }},
      humidity {{ weather.current.humidity }}%
    </p>
    <ul class="badges" aria-label="Five-day summary">
      <li>High: {{ stats.high }}°</li>
      <li>Low: {{ stats.low }}°</li>
      <li>Avg humidity: {{ stats.avg_humidity }}%</li>
      <li>Max rain prob: {{ (stats.max_rain_prob * 100)|round|int }}%</li>
      <li>Frost risk: {{ 'Yes' if stats.frost_risk else 'No' }}</li>
      <li>Heat risk: {{ 'Yes' if stats.heat_risk else 'No' }}</li>
    </ul>
  </section>

  <section class="card">
    <h3>Plants</h3>
    <p>{{ plants|default('—')|e }}</p>
  </section>

  <section class="card">
    <h3>AI Care Advice</h3>
    {% set lines = advice.split('\n') if advice else [] %}
    <ul class="advice-list">
      {% for line in lines if line.strip() %}
        <li>{{ line|e }}</li>
      {% endfor %}
    </ul>
    <p><a href="{{ url_for('index') }}" class="back">← New query</a></p>
  </section>

  <script>
    // Shift focus to results header for keyboard/SR users
    (function() {
      const h = document.getElementById('results-heading');
      if (h) h.focus();
    })();
  </script>
{% endblock %}
